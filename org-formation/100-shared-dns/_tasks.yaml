Parameters:
  <<: !Include '../_parameters.yaml'

SagebioAppZone:  # Zone for application front-end DNS names, e.g. 'dca.app.sagebionetworks.org'
  Type: update-stacks
  Template: https://raw.githubusercontent.com/Sage-Bionetworks/aws-infra/v0.6.8/templates/R53-hostedzone.yaml
  StackName: !Sub '${resourcePrefix}-sagebio-app-zone'
  StackDescription: Create a shared hosted zone for application domains
  DefaultOrganizationBindingRegion: !Ref primaryRegion
  DefaultOrganizationBinding:
    Account: !Ref SageITAccount
  Parameters:
    DnsDomainName: "app.sagebionetworks.org"

SagebioAppZoneAcmCertificate:  # Wildcard certificate for '*.app.sagebionetworks.org'
  Type: update-stacks
  Template: https://raw.githubusercontent.com/Sage-Bionetworks/aws-infra/v0.6.8/templates/acm-certificate.yaml
  StackName: !Sub '${resourcePrefix}-sagebio-app-cert'
  StackDescription: Create a wildcard certificate for application domains
  DefaultOrganizationBindingRegion: !Ref primaryRegion
  DefaultOrganizationBinding:
    # We need a copy of this certificate in every account where it will be used
    Account:
      - !Ref DnTDevAccount
      - !Ref DCAProdAccount
      - !Ref GenieProdAccount
  Parameters:
    DnsDomainName: "app.sagebionetworks.org"

SagebioApiZone:  # Zone for intra-API DNS names, e.g. 'schematic.api.sagebionetworks.org'
  Type: update-stacks
  Template: https://raw.githubusercontent.com/Sage-Bionetworks/aws-infra/v0.6.8/templates/R53-hostedzone.yaml
  StackName: !Sub '${resourcePrefix}-sagebio-api-zone'
  StackDescription: Create a shared hosted zone for api domains
  DefaultOrganizationBindingRegion: !Ref primaryRegion
  DefaultOrganizationBinding:
    Account: !Ref SageITAccount
  Parameters:
    DnsDomainName: "api.sagebionetworks.org"

SagebioApiZoneAcmCertificate:  # Wildcard certificate for '*.api.sagebionetworks.org'
  Type: update-stacks
  Template: https://raw.githubusercontent.com/Sage-Bionetworks/aws-infra/v0.6.8/templates/acm-certificate.yaml
  StackName: !Sub '${resourcePrefix}-sagebio-api-cert'
  StackDescription: Create a wildcard certificate for api domains
  DefaultOrganizationBindingRegion: !Ref primaryRegion
  DefaultOrganizationBinding:
    # We need a copy of this certificate in every account where it will be used
    Account:
      - !Ref DnTDevAccount
      - !Ref DCAProdAccount
      - !Ref GenieProdAccount
  Parameters:
    DnsDomainName: "api.sagebionetworks.org"
