Parameters:
  <<: !Include '../_parameters.yaml'

AppZone:  # Zone for application front-end DNS names, e.g. 'dca.app.sagebionetworks.org'
  Type: update-stacks
  Template: https://raw.githubusercontent.com/Sage-Bionetworks/aws-infra/v0.6.7/templates/R53-hostedzone.yaml
  StackName: !Sub '${resourcePrefix}-shared-app-zone'
  StackDescription: Create a shared hosted zone for application domains
  DefaultOrganizationBindingRegion: !Ref primaryRegion
  DefaultOrganizationBinding:
    Account: !Ref SageITAccount
  Parameters:
    DnsDomainName: "app.sagebionetworks.org"
    Owner: it@sagebase.org
    Project: Infrastructure
    Department: Platform

ApiZone:  # Zone for intra-API DNS names, e.g. 'schematic.api.sagebionetworks.org'
  Type: update-stacks
  Template: https://raw.githubusercontent.com/Sage-Bionetworks/aws-infra/v0.6.7/templates/R53-hostedzone.yaml
  StackName: !Sub '${resourcePrefix}-shared-api-zone'
  StackDescription: Create a shared hosted zone for api domains
  DefaultOrganizationBindingRegion: !Ref primaryRegion
  DefaultOrganizationBinding:
    Account: !Ref SageITAccount
  Parameters:
    DnsDomainName: "api.sagebionetworks.org"
    Owner: it@sagebase.org
    Project: Infrastructure
    Department: Platform

DelegationPolicy:  # Allow member accounts to update NS records
  Type: update-stacks
  Template: zone-delegate.yaml
  StackName: !Sub '${resourcePrefix}-zone-delegate'
  DefaultOrganizationBinding:
    Account: '*'
    Region: !Ref primaryRegion
